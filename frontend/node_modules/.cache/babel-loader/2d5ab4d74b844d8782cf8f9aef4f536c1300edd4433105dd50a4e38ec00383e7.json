{"ast":null,"code":"var ModelSortPredicateCreator = /** @class */function () {\n  function ModelSortPredicateCreator() {}\n  ModelSortPredicateCreator.createPredicateBuilder = function (modelDefinition) {\n    var modelName = modelDefinition.name;\n    var fieldNames = new Set(Object.keys(modelDefinition.fields));\n    var handler;\n    var predicate = new Proxy({}, handler = {\n      get: function (_target, propertyKey, receiver) {\n        var field = propertyKey;\n        if (!fieldNames.has(field)) {\n          throw new Error(\"Invalid field for model. field: \" + field + \", model: \" + modelName);\n        }\n        var result = function (sortDirection) {\n          var _a;\n          (_a = ModelSortPredicateCreator.sortPredicateGroupsMap.get(receiver)) === null || _a === void 0 ? void 0 : _a.push({\n            field: field,\n            sortDirection: sortDirection\n          });\n          return receiver;\n        };\n        return result;\n      }\n    });\n    ModelSortPredicateCreator.sortPredicateGroupsMap.set(predicate, []);\n    return predicate;\n  };\n  ModelSortPredicateCreator.isValidPredicate = function (predicate) {\n    return ModelSortPredicateCreator.sortPredicateGroupsMap.has(predicate);\n  };\n  ModelSortPredicateCreator.getPredicates = function (predicate, throwOnInvalid) {\n    if (throwOnInvalid === void 0) {\n      throwOnInvalid = true;\n    }\n    if (throwOnInvalid && !ModelSortPredicateCreator.isValidPredicate(predicate)) {\n      throw new Error('The predicate is not valid');\n    }\n    var predicateGroup = ModelSortPredicateCreator.sortPredicateGroupsMap.get(predicate);\n    if (predicateGroup) {\n      return predicateGroup;\n    } else {\n      throw new Error('Predicate group not found');\n    }\n  };\n  // transforms cb-style predicate into Proxy\n  ModelSortPredicateCreator.createFromExisting = function (modelDefinition, existing) {\n    if (!existing || !modelDefinition) {\n      return undefined;\n    }\n    return existing(ModelSortPredicateCreator.createPredicateBuilder(modelDefinition));\n  };\n  ModelSortPredicateCreator.sortPredicateGroupsMap = new WeakMap();\n  return ModelSortPredicateCreator;\n}();\nexport { ModelSortPredicateCreator };","map":{"version":3,"names":["ModelSortPredicateCreator","createPredicateBuilder","modelDefinition","modelName","name","fieldNames","Set","Object","keys","fields","handler","predicate","Proxy","get","_target","propertyKey","receiver","field","has","Error","result","sortDirection","_a","sortPredicateGroupsMap","push","set","isValidPredicate","getPredicates","throwOnInvalid","predicateGroup","createFromExisting","existing","undefined","WeakMap"],"sources":["/Users/andyzhang/Documents/GitHub/Full-stack-project-GuitarSaleWeb/frontend/node_modules/@aws-amplify/datastore/src/predicates/sort.ts"],"sourcesContent":["import {\n\tPersistentModel,\n\tSchemaModel,\n\tSortPredicate,\n\tProducerSortPredicate,\n\tSortDirection,\n\tSortPredicatesGroup,\n} from '../types';\n\nexport class ModelSortPredicateCreator {\n\tprivate static sortPredicateGroupsMap = new WeakMap<\n\t\tSortPredicate<any>,\n\t\tSortPredicatesGroup<any>\n\t>();\n\n\tprivate static createPredicateBuilder<T extends PersistentModel>(\n\t\tmodelDefinition: SchemaModel\n\t) {\n\t\tconst { name: modelName } = modelDefinition;\n\t\tconst fieldNames = new Set<keyof T>(Object.keys(modelDefinition.fields));\n\n\t\tlet handler: ProxyHandler<SortPredicate<T>>;\n\t\tconst predicate = new Proxy(\n\t\t\t{} as SortPredicate<T>,\n\t\t\t(handler = {\n\t\t\t\tget(_target, propertyKey, receiver: SortPredicate<T>) {\n\t\t\t\t\tconst field = propertyKey as keyof T;\n\n\t\t\t\t\tif (!fieldNames.has(field)) {\n\t\t\t\t\t\tthrow new Error(\n\t\t\t\t\t\t\t`Invalid field for model. field: ${field}, model: ${modelName}`\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\n\t\t\t\t\tconst result = (sortDirection: SortDirection) => {\n\t\t\t\t\t\tModelSortPredicateCreator.sortPredicateGroupsMap\n\t\t\t\t\t\t\t.get(receiver)\n\t\t\t\t\t\t\t?.push({ field, sortDirection });\n\n\t\t\t\t\t\treturn receiver;\n\t\t\t\t\t};\n\t\t\t\t\treturn result;\n\t\t\t\t},\n\t\t\t})\n\t\t);\n\n\t\tModelSortPredicateCreator.sortPredicateGroupsMap.set(predicate, []);\n\n\t\treturn predicate;\n\t}\n\n\tstatic isValidPredicate<T extends PersistentModel>(\n\t\tpredicate: any\n\t): predicate is SortPredicate<T> {\n\t\treturn ModelSortPredicateCreator.sortPredicateGroupsMap.has(predicate);\n\t}\n\n\tstatic getPredicates<T extends PersistentModel>(\n\t\tpredicate: SortPredicate<T>,\n\t\tthrowOnInvalid: boolean = true\n\t): SortPredicatesGroup<T> {\n\t\tif (\n\t\t\tthrowOnInvalid &&\n\t\t\t!ModelSortPredicateCreator.isValidPredicate(predicate)\n\t\t) {\n\t\t\tthrow new Error('The predicate is not valid');\n\t\t}\n\n\t\tconst predicateGroup =\n\t\t\tModelSortPredicateCreator.sortPredicateGroupsMap.get(predicate);\n\t\tif (predicateGroup) {\n\t\t\treturn predicateGroup;\n\t\t} else {\n\t\t\tthrow new Error('Predicate group not found');\n\t\t}\n\t}\n\n\t// transforms cb-style predicate into Proxy\n\tstatic createFromExisting<T extends PersistentModel>(\n\t\tmodelDefinition: SchemaModel,\n\t\texisting: ProducerSortPredicate<T>\n\t) {\n\t\tif (!existing || !modelDefinition) {\n\t\t\treturn undefined;\n\t\t}\n\n\t\treturn existing(\n\t\t\tModelSortPredicateCreator.createPredicateBuilder(modelDefinition)\n\t\t);\n\t}\n}\n"],"mappings":"AASA,IAAAA,yBAAA;EAAA,SAAAA,0BAAA,GAiFA;EA3EgBA,yBAAA,CAAAC,sBAAsB,GAArC,UACCC,eAA4B;IAEpB,IAAAC,SAAA,GAAAD,eAAA,CAAAE,IAAe;IACvB,IAAMC,UAAU,GAAG,IAAIC,GAAG,CAAUC,MAAM,CAACC,IAAI,CAACN,eAAe,CAACO,MAAM,CAAC,CAAC;IAExE,IAAIC,OAAuC;IAC3C,IAAMC,SAAS,GAAG,IAAIC,KAAK,CAC1B,EAAsB,EACrBF,OAAO,GAAG;MACVG,GAAG,EAAH,SAAAA,CAAIC,OAAO,EAAEC,WAAW,EAAEC,QAA0B;QACnD,IAAMC,KAAK,GAAGF,WAAsB;QAEpC,IAAI,CAACV,UAAU,CAACa,GAAG,CAACD,KAAK,CAAC,EAAE;UAC3B,MAAM,IAAIE,KAAK,CACd,qCAAmCF,KAAK,iBAAYd,SAAW,CAC/D;;QAGF,IAAMiB,MAAM,GAAG,SAAAA,CAACC,aAA4B;;UAC3C,CAAAC,EAAA,GAAAtB,yBAAyB,CAACuB,sBAAsB,CAC9CV,GAAG,CAACG,QAAQ,CAAC,cAAAM,EAAA,uBAAAA,EAAA,CACZE,IAAI,CAAC;YAAEP,KAAK,EAAAA,KAAA;YAAEI,aAAa,EAAAA;UAAA,CAAE;UAEhC,OAAOL,QAAQ;QAChB,CAAC;QACD,OAAOI,MAAM;MACd;KACC,CACF;IAEDpB,yBAAyB,CAACuB,sBAAsB,CAACE,GAAG,CAACd,SAAS,EAAE,EAAE,CAAC;IAEnE,OAAOA,SAAS;EACjB,CAAC;EAEMX,yBAAA,CAAA0B,gBAAgB,GAAvB,UACCf,SAAc;IAEd,OAAOX,yBAAyB,CAACuB,sBAAsB,CAACL,GAAG,CAACP,SAAS,CAAC;EACvE,CAAC;EAEMX,yBAAA,CAAA2B,aAAa,GAApB,UACChB,SAA2B,EAC3BiB,cAA8B;IAA9B,IAAAA,cAAA;MAAAA,cAAA,OAA8B;IAAA;IAE9B,IACCA,cAAc,IACd,CAAC5B,yBAAyB,CAAC0B,gBAAgB,CAACf,SAAS,CAAC,EACrD;MACD,MAAM,IAAIQ,KAAK,CAAC,4BAA4B,CAAC;;IAG9C,IAAMU,cAAc,GACnB7B,yBAAyB,CAACuB,sBAAsB,CAACV,GAAG,CAACF,SAAS,CAAC;IAChE,IAAIkB,cAAc,EAAE;MACnB,OAAOA,cAAc;KACrB,MAAM;MACN,MAAM,IAAIV,KAAK,CAAC,2BAA2B,CAAC;;EAE9C,CAAC;EAED;EACOnB,yBAAA,CAAA8B,kBAAkB,GAAzB,UACC5B,eAA4B,EAC5B6B,QAAkC;IAElC,IAAI,CAACA,QAAQ,IAAI,CAAC7B,eAAe,EAAE;MAClC,OAAO8B,SAAS;;IAGjB,OAAOD,QAAQ,CACd/B,yBAAyB,CAACC,sBAAsB,CAACC,eAAe,CAAC,CACjE;EACF,CAAC;EA/EcF,yBAAA,CAAAuB,sBAAsB,GAAG,IAAIU,OAAO,EAGhD;EA6EJ,OAAAjC,yBAAC;CAAA,CAjFD;SAAaA,yBAAyB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}